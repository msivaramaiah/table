<title>JSON Data To HTML Table</title>
</head>
<style>
    th {
        background-color: #000;
        color: #fff
    }

    th,
    td {
        padding: 10px
    }

    tr:nth-child(odd) {
        background-color: #f2f2f2
    }

    #myInput {
        background-position: 10px 10px;
        background-repeat: no-repeat;
        width: 100%;
        font-size: 16px;
        padding: 12px 20px 12px 40px;
        border: 1px solid #ddd;
        margin-bottom: 12px;
    }
</style>

<body>
    <h2>JSON Data To HTML Table</h2>
    <input type="text" id="myInput" onkeyup="myFunction()" placeholder="Biing Account.." title="Type in a name">
    <div id="tblEmployee"></div>

    <script>


        function fetchJSONData() {
            fetch("./tabledata2.json")
                .then((res) => {
                    if (!res.ok) {
                        throw new Error
                            (`HTTP error! Status: ${res.status}`);
                    }
                    return res.json();
                })
                .then((data) => {
                    console.log(data);
                    var jsonDataEmployee = data;
                    window.onload = JSONToHTMLTable(jsonDataEmployee, "tblEmployee");

                    function JSONToHTMLTable(jsonData, elementToBind) {

                        //This Code gets all columns for header   and stored in array col
                        var col = [];
                        for (var i = 0; i < jsonData.length; i++) {
                            for (var key in jsonData[i]) {
                                if (col.indexOf(key) === -1) {
                                    col.push(key);
                                }
                            }
                        }

                        //This Code creates HTML table
                        var table = document.createElement("table");

                        //This Code getsrows for header creader above.
                        var tr = table.insertRow(-1);

                        for (var i = 0; i < col.length; i++) {
                            var th = document.createElement("th");
                            th.innerHTML = col[i];
                            tr.appendChild(th);
                        }

                        //This Code adds data to table as rows
                        for (var i = 0; i < jsonData.length; i++) {

                            tr = table.insertRow(-1);

                            for (var j = 0; j < col.length; j++) {
                                var tabCell = tr.insertCell(-1);
                                tabCell.innerHTML = jsonData[i][col[j]];
                            }
                        }

                        //This Code gets the all columns for header
                        var divContainer = document.getElementById(elementToBind);
                        divContainer.innerHTML = "";
                        divContainer.appendChild(table);

                    }

                })
                .catch((error) =>
                    console.error("Unable to fetch data:", error));
        }
        fetchJSONData();

        function myFunction() {
            var input, filter, table, trr, td, i, txtValue;
            input = document.getElementById("myInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("elementToBind");
            trr = table.getElementsByTagName("tr");
            for (i = 0; i < trr.length; i++) {
                tdd = trr[i].getElementsByTagName("td")[0];
                if (tdd) {
                    txtValue = tdd.textContent || tdd.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        trr[i].style.display = "";
                    } else {
                        trr[i].style.display = "none";
                    }
                }
            }
        }


    </script>